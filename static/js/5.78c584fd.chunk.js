(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{21:function(e,t,c){"use strict";var a=c.p+"static/media/error.42292aa1.gif",s=c(3);t.a=()=>Object(s.jsx)("img",{style:{display:"block",width:"250",height:"250",objectFit:"contain",margin:"0 auto"},src:a,alt:"Error"})},22:function(e,t,c){"use strict";var a=c(0);t.a=()=>{const{loading:e,request:t,error:c,clearError:s,process:r,setProcess:n}=(()=>{const[e,t]=Object(a.useState)(!1),[c,s]=Object(a.useState)(null),[r,n]=Object(a.useState)("waiting");return{loading:e,request:Object(a.useCallback)((async function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};t(!0),n("loading");try{const s=await fetch(e,{method:c,body:a,headers:r});if(!s.ok)throw new Error("Could not fetch ".concat(e,", status: ").concat(s.status));const n=await s.json();return t(!1),n}catch(i){throw t(!1),s(i.message),n("error"),i}}),[]),error:c,clearError:Object(a.useCallback)((()=>{s(null),n("loading")}),[]),process:r,setProcess:n}})(),i="https://gateway.marvel.com:443/v1/public/",o="apikey=e71e2718fabff072296a2d9a69c1759c",l=e=>{const t=e.description?e.description.length>150?e.description.slice(0,149)+"...":e.description:"There is no data about ".concat(e.name);return{id:e.id,name:e.name,description:t,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},d=e=>{var t;return{id:e.id,title:e.title,description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," p."):"No information about the number of pages",thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,language:(null===(t=e.textObjects[0])||void 0===t?void 0:t.language)||"en-us",price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available"}};return{loading:e,error:c,process:r,setProcess:n,getCharacter:async e=>{const c=await t("".concat(i,"characters/").concat(e,"?&").concat(o));return l(c.data.results[0])},getCharacterByName:async e=>{const c=await t("".concat(i,"characters?name=").concat(e,"&").concat(o));return l(c.data.results[0])},getAllCharacters:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:210;const c=await t("".concat(i,"characters?limit=9&offset=").concat(e,"&").concat(o));return c.data.results.map(l)},clearError:s,getComics:async e=>{const c=await t("".concat(i,"comics/").concat(e,"?&").concat(o));return d(c.data.results[0])},getAllComics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const c=await t("".concat(i,"comics?limit=8&offset=").concat(e,"&").concat(o));return c.data.results.map(d)}}}},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},44:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(25),r=c(22),n=c(6),i=c(21),o=(c(36),c(3));var l=()=>Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(o.jsxs)("div",{className:"skeleton",children:[Object(o.jsxs)("div",{className:"pulse skeleton__header",children:[Object(o.jsx)("div",{className:"pulse skeleton__circle"}),Object(o.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(o.jsx)("div",{className:"pulse skeleton__block"}),Object(o.jsx)("div",{className:"pulse skeleton__block"}),Object(o.jsx)("div",{className:"pulse skeleton__block"})]})]});var d=(e,t,c)=>{switch(e){case"waiting":return Object(o.jsx)(l,{});case"loading":return Object(o.jsx)(n.a,{});case"confirmed":return Object(o.jsx)(t,{data:c});case"error":return Object(o.jsx)(i.a,{});default:throw new Error("Unexpected process state")}},h=(c(37),c.p+"static/media/mjolnir.61f31e18.png");const j=e=>{let{data:t}=e;const{name:c,description:a,thumbnail:s,homepage:r,wiki:n}=t,i=(null===s||void 0===s?void 0:s.includes("image_not_available"))?"randomchar__img randomchar__img--no-image":"randomchar__img";return Object(o.jsxs)("div",{className:"randomchar__block",children:[Object(o.jsx)("img",{src:s,alt:"Random character",className:i}),Object(o.jsxs)("div",{className:"randomchar__info",children:[Object(o.jsx)("p",{className:"randomchar__name",children:c}),Object(o.jsx)("p",{className:"randomchar__descr",children:a}),Object(o.jsxs)("div",{className:"randomchar__btns",children:[Object(o.jsx)("a",{href:r,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"homepage"})}),Object(o.jsx)("a",{href:n,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})};var m=()=>{const[e,t]=Object(a.useState)({}),{getCharacter:c,clearError:s,process:n,setProcess:i}=Object(r.a)();Object(a.useEffect)((()=>{m()}),[]);const l=e=>{t(e)},m=()=>{s();const e=Math.floor(400*Math.random()+1011e3);c(e).then(l).then((()=>i("confirmed")))};return Object(o.jsxs)("div",{className:"randomchar",children:[d(n,j,e),Object(o.jsxs)("div",{className:"randomchar__static",children:[Object(o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(o.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(o.jsx)("button",{className:"button button__main",children:Object(o.jsx)("div",{className:"inner",onClick:m,children:"try it"})}),Object(o.jsx)("img",{src:h,alt:"mjolnir",className:"randomchar__decoration"})]})]})},b=c(28),u=c.n(b);c(38);const O=(e,t,c)=>{switch(e){case"waiting":return Object(o.jsx)(n.a,{});case"loading":return c?Object(o.jsx)(t,{}):Object(o.jsx)(n.a,{});case"confirmed":return Object(o.jsx)(t,{});case"error":return Object(o.jsx)(i.a,{});default:throw new Error("Unexpected process state")}},_=e=>{let{onCharSelected:t}=e;const[c,s]=Object(a.useState)([]),[n,i]=Object(a.useState)(!1),[l,d]=Object(a.useState)(210),[h,j]=Object(a.useState)(!1),m=Object(a.useRef)(),{getAllCharacters:b,process:u,setProcess:_}=Object(r.a)();Object(a.useEffect)((()=>{p(l,!0)}),[]);const x=e=>{t(e),m.current=e},p=(e,t)=>{i(!t),b(e).then((e=>{let t=!1;e.length<9&&(t=!0),s((t=>[...t,...e])),i(!1),d((e=>e+9)),j(t),_("confirmed")})).catch((()=>{s([])}))},g=c.map((e=>Object(o.jsxs)("li",{tabIndex:0,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||x(e.id)},className:"char__item ".concat(e.id===m.current?"char__item--selected":""),onClick:()=>x(e.id),children:[Object(o.jsx)("img",{src:e.thumbnail,alt:e.name,className:e.thumbnail.includes("image_not_available")?"char__item-img char__item-img--no-image":"char__item-img"}),Object(o.jsx)("div",{className:"char__name",children:e.name})]},e.id)));return Object(o.jsxs)("div",{className:"char__list",children:[Object(o.jsx)("ul",{className:"char__grid",children:O(u,(()=>g),n)}),Object(o.jsx)("button",{className:"button button__main button__long",disabled:n,style:{display:h?"none":"block"},onClick:()=>p(l),children:Object(o.jsx)("div",{className:"inner",children:"load more"})})]})};_.propType={onCharSelected:u.a.func.isRequired};var x=_;c(39);const p=e=>{let{data:t}=e;const{name:c,description:a,thumbnail:s,homepage:r,wiki:n,comics:i}=t;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"char__basics",children:[Object(o.jsx)("img",{src:s,alt:c}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"char__info-name",children:c}),Object(o.jsxs)("div",{className:"char__btns",children:[Object(o.jsx)("a",{href:r,className:"button button__main",children:Object(o.jsx)("div",{className:"inner",children:"homepage"})}),Object(o.jsx)("a",{href:n,className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(o.jsx)("div",{className:"char__descr",children:a}),Object(o.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(o.jsxs)("ul",{className:"char__comics-list",children:[i.length>0?null:"There is no comics with ".concat(c),i.map(((e,t)=>{if(!(t>9))return Object(o.jsx)("li",{className:"char__comics-item",children:e.name},t)}))]})]})};var g=e=>{const[t,c]=Object(a.useState)(null),{getCharacter:s,clearError:n,process:i,setProcess:l}=Object(r.a)(),h=Object(a.useCallback)((()=>{const{charId:t}=e;t&&(n(),s(t).then(j).then((()=>l("confirmed"))))}),[e,n,s,l]);Object(a.useEffect)((()=>{h()}),[e.charId]);const j=e=>{c(e)};return Object(o.jsx)("div",{className:"char__info",children:d(i,p,t)})};class v extends a.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e,t){console.log(e,t),this.setState({error:!0})}render(){return this.state.error?Object(o.jsx)("h2",{children:"Something went wrong..."}):this.props.children}}var N=v,f=c.p+"static/media/vision.067d4ae1.png",w=c(54),k=c(40),y=(c(44),c(4));var C=()=>{const[e,t]=Object(a.useState)(!1),[c,s]=Object(a.useState)(!1),[i,l]=Object(a.useState)(null),{getCharacterByName:d}=Object(r.a)();return Object(o.jsxs)("div",{className:"char-search",children:[Object(o.jsx)(w.d,{initialValues:{name:""},validationSchema:k.a({name:k.b().required("This field is required")}),onSubmit:(e,c)=>{let{resetForm:a}=c;return((e,c)=>{t(!0),d(e).then((e=>{l(e),t(!1),c()})).catch((()=>{t(!1),s(!0)}))})(e.name,a)},children:Object(o.jsxs)(w.c,{children:[Object(o.jsx)("h2",{className:"char-search__title",children:"Or find a character by name:"}),Object(o.jsxs)("div",{className:"char-search__input-wrapper",children:[Object(o.jsx)(w.b,{className:"char-search__input",id:"name",name:"name",type:"text",placeholder:"Enter name"}),Object(o.jsx)("button",{className:"button button__main",type:"submit",children:Object(o.jsx)("div",{className:"inner",children:"FIND"})})]}),Object(o.jsx)(w.a,{className:"char-search__text char-search__text--error",name:"name",component:"div"})]})}),e&&Object(o.jsx)(n.a,{}),c&&Object(o.jsx)("div",{className:"char-search__text char-search__text--error",children:"The character was not found. Check the name and try again"}),i&&Object(o.jsxs)("div",{className:"char-search__input-wrapper",children:[Object(o.jsxs)("p",{className:"char-search__text char-search__text--sucses",children:["There is! Visit ",i.name," page?"]}),Object(o.jsx)(y.b,{to:"/character/".concat(i.id),children:Object(o.jsx)("button",{className:"button button__secondary",children:Object(o.jsx)("div",{className:"inner",children:"TO PAGE"})})})]})]})};t.default=()=>{const[e,t]=Object(a.useState)(null);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(s.a,{children:[Object(o.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(o.jsx)("title",{children:"Marvel information portal"})]}),Object(o.jsx)(N,{children:Object(o.jsx)(m,{})}),Object(o.jsxs)("div",{className:"char__content",children:[Object(o.jsx)(N,{children:Object(o.jsx)(x,{onCharSelected:e=>{t(e)}})}),Object(o.jsx)(N,{children:Object(o.jsxs)("div",{children:[Object(o.jsx)(g,{charId:e}),Object(o.jsx)(C,{})]})})]}),Object(o.jsx)("img",{className:"bg-decoration",src:f,alt:"vision"})]})}}}]);
//# sourceMappingURL=5.78c584fd.chunk.js.map